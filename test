<!DOCTYPE html>
<html>
<head>
    <title>Dropdown List Example</title>
</head>
<body>
    <h1>Dropdown List Example</h1>
    
    <!-- First Dropdown List -->
    <label for="cluster">Select Cluster:</label>
    <select id="cluster" onchange="populateHosts()">
        <option value="">Select</option>
    </select>
    
    <!-- Second Dropdown List -->
    <label for="host">Select Host:</label>
    <select id="host" onchange="displaySelectedValue()">
        <option value="">Select</option>
    </select>

    <!-- Textbox to display selected value -->
    <label for="value">Selected Value:</label>
    <input type="text" id="value" readonly>

    <!-- Hidden JSON data -->
    <script type="text/javascript">
        var jsonData = [
            { cluster: "x", host: "1", value: 100 },
            { cluster: "x", host: "10", value: 1000 },
            { cluster: "x", host: "11", value: 1001 },
            { cluster: "y", host: "22", value: 100 },
            { cluster: "Z", host: "1", value: 100 }
        ];

        // Populate the first dropdown list with unique clusters
        var clusterDropdown = document.getElementById("cluster");
        var uniqueClusters = [...new Set(jsonData.map(item => item.cluster))];
        uniqueClusters.forEach(cluster => {
            var option = document.createElement("option");
            option.value = cluster;
            option.textContent = cluster;
            clusterDropdown.appendChild(option);
        });

        // Function to populate the second dropdown list based on the selected cluster
        function populateHosts() {
            var selectedCluster = clusterDropdown.value;
            var hostDropdown = document.getElementById("host");
            hostDropdown.innerHTML = "<option value=''>Select</option>";

            if (selectedCluster !== "") {
                var hostsForCluster = jsonData.filter(item => item.cluster === selectedCluster);
                hostsForCluster.forEach(item => {
                    var option = document.createElement("option");
                    option.value = item.host;
                    option.textContent = item.host;
                    hostDropdown.appendChild(option);
                });
            }
            // Clear the textbox value when cluster selection changes
            document.getElementById("value").value = "";
        }

        // Function to display the value of the selected host in the textbox
        function displaySelectedValue() {
            var selectedCluster = document.getElementById("cluster").value;
            var selectedHost = document.getElementById("host").value;
            var selectedValueTextbox = document.getElementById("value");

            // Find the corresponding value for the selected host and cluster in the JSON data
            var selectedValue = jsonData.find(item => item.host === selectedHost && item.cluster === selectedCluster)?.value;

            // Display the selected value in the textbox
            selectedValueTextbox.value = selectedValue || '';
        }
    </script>
</body>
</html>
